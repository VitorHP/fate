
= simple_form_for @character do |f|
  .row
    %fieldset#character-fields
      = f.input :name, label: false, placeholder: t("activerecord.attributes.character.name")
      = f.input :description, label: false, placeholder: t("activerecord.attributes.character.description")
      = f.input :refresh, label: false, placeholder: t("activerecord.attributes.character.refresh")
  .row
    #aspects-panel
      = f.fields_for :aspects do |a|
        - # Boa noite, Vitor do futuro. Essa foi a linha mais desnecessariamente complexa que você escreveu até o dia 19 de Março de 2014.
        - # Se você encontrou um problema com ela, eu deixo aqui minhas sinceras desculpas.
        = a.input :id, as: :hidden
        = a.input :name, label: false, placeholder: "#{ Array.new(f.object.aspects.size) { |index| if index == 0; t("activerecord.attributes.character.high_concept"); elsif index == 1; t("activerecord.attributes.character.trouble"); else "" end }[a.index] }"

    #skill-panel
      #skills
        - Ladder.new.to_h(from: :great, to: :average).each_pair do |name, level|
          %div{ class: name }
            .skill-row
              %span.rating= "#{name.to_s.humanize} (+#{level})"
              = f.fields_for :ratings, @character.ratings.select{ |r| r.level == level } do |r|
                .slot
                  %span.name= "#{r.object.skill.name if r.object.skill.present? }"
                  = r.input :id, as: :hidden
                  = r.input :skill_id, as: :hidden
                  = r.input :level, as: :hidden, input_html: { value: level }

      #skill-drawer
        #skill-list.collapse
          - @skills.each do |skill|
            .skill{ data: { id: skill.id } }= skill.name if skill.present?
        #link
          %button{ type: "button", class: "btn", 'data-toggle' => "collapse", 'data-target' => "#skill-list" }= "Skill List"
  .row
    = f.button :submit
