
= simple_form_for @character, html: { class: 'character' } do |f|
  .row
    %fieldset#character-fields
      %h2= t("activerecord.controllers.characters.id")
      = f.input :name, label: false, placeholder: t("activerecord.attributes.character.name")
      = f.input :description, label: false, placeholder: t("activerecord.attributes.character.description")
      = f.input :refresh, label: false, placeholder: t("activerecord.attributes.character.refresh")
    #fate-logo
      = image_tag image_url('fate-logo.png')
  .row
    %fieldset#aspects-panel
      %h2= t("activerecord.controllers.characters.aspects")
      = f.fields_for :aspects do |a|
        - # Boa noite, Vitor do futuro. Essa foi a linha mais desnecessariamente complexa que você escreveu até o dia 19 de Março de 2014.
        - # Se você encontrou um problema com ela, eu deixo aqui minhas sinceras desculpas.
        = a.input :id, as: :hidden
        = a.input :name, label: false, placeholder: "#{ Array.new(f.object.aspects.size) { |index| if index == 0; t("activerecord.attributes.character.high_concept"); elsif index == 1; t("activerecord.attributes.character.trouble"); else "" end }[a.index] }"

    #skill-panel
      %h2= t("activerecord.controllers.characters.skills")
      %fieldset#skills
        - Ladder.new.to_h(from: :great, to: :average).each_pair do |name, level|
          %div{ class: name }
            .skill-row
              %span.rating= "#{name.to_s.humanize} (+#{level})"
              = f.fields_for :ratings, @character.ratings.select{ |r| r.level == level } do |r|
                .slot{ class: r.object.skill_id.present? ? "with-skill" : nil }
                  %span.name= "#{r.object.skill.name if r.object.skill.present? }"
                  = r.input :id, as: :hidden
                  = r.input :skill_id, as: :hidden
                  = r.input :level, as: :hidden, input_html: { value: level }

      #skill-drawer
        #skill-list.collapse
          - @skills.each do |skill|
            .skill{ data: { id: skill.id } }= skill.name if skill.present?
        #link
          %button{ type: "button", class: "btn btn-sm", 'data-toggle' => "collapse", 'data-target' => "#skill-list" }= "Skill List"
  .row
    %fieldset#stunts-panel
      %h2= t("activerecord.controllers.characters.stunts")
      = f.fields_for :stunts do |s|
        = s.input :id, as: :hidden
        = s.input :name, label: false, placeholder: t("activerecord.attributes.stunt.name")
        = s.input :description, label: false, placeholder: t("activerecord.attributes.stunt.description")
    %fieldset#extras-panel
      %h2= t("activerecord.controllers.characters.extras")
      = f.fields_for :extras do |s|
        = s.input :id, as: :hidden
        = s.input :name, label: false, placeholder: t("activerecord.attributes.extra.name")
        = s.input :description, label: false, placeholder: t("activerecord.attributes.extra.description")
  .row
    = f.button :submit
